# Дорожная карта (MVP) — Музыкальная платформа

Обновлено: 2025-09-04

## 1. Главная страница — Блоки
- Баннер сверху — главная новинка недели или промо-альбом.
- Рекомендации — подборки треков, которые стоит послушать.
- Популярное сейчас — TOP-треки, которые больше всего слушают на площадке (на старт — фейковые данные).
- Новые релизы — последние добавления от пользователей (сортировка по дате загрузки, в том числе из «Моей музыки»).
- Музыка от пользователей — отдельный блок «Из нового на платформе» (карусель или грид), показывающий свежие загруженные треки.

## 2. Взаимодействие с карточками треков
- ▶ Play — воспроизведение (уже реализовано в базовом виде).
- ❤ Добавить в избранное — отдельный плейлист «Любимое» (создаётся, если нет).
- ➕ Добавить в плейлист — пока добавление в дефолтный плейлист (позже — выбор).
- ℹ Информация о треке — модалка/выпадашка: название, автор, дата загрузки, длительность (если есть), теги (по возможности).

## 3. Раздел «Моя музыка» (загрузка треков)
- Список треков, загруженных текущим пользователем.
- Кнопка «Загрузить трек» — drag & drop и/или выбор файла.
- Статус трека: «обрабатывается» / «опубликован».
- Интеграция: загруженные треки автоматически попадают в общий список «Новые релизы».

## 4. Что сделать на главной (MVP)
- Баннер (статический или управляемый через конфиг; позже — из API).
- Рекомендации — реализованы и расширены до 12 карточек; довести до стабильного состояния.
- Популярное сейчас — на первом этапе фейковые данные.
- Новые релизы — подтягивать из базы по дате загрузки.
- «Музыка пользователей» — карусель или грид из последних пользовательских треков.

## 5. Технические задачи и интеграции (MVP)
- Компонент карточки трека: унифицировать экшены (Play, Fav, Add, Info).
- Сервис/контекст для «Любимого» плейлиста (создание/получение/добавление трека).
- Сервис загрузки треков (My Music):
  - локальное состояние очереди/статусов;
  - интеграция с бэкендом (POST upload, GET list, PATCH status) — mock до появления API.
- Источник данных для «Новые релизы» (mock → API): сортировка по дате.
- Источник данных для «Популярное сейчас» (mock → API): сортировка по плейам/лайкам.
- UI-карусель для блока «Музыка пользователей» (адаптив, свайп, клавиши).

## 6. Доработки вкладки «Пользователи»
- Список пользователей (аватар, никнейм, краткая инфа).
- Страница профиля пользователя:
  - публичные плейлисты;
  - загруженная музыка (если публична);
  - кнопка «Подписаться» / «Отписаться» (mock на MVP);
  - счётчики: подписчики, подписки, плейлисты, треки.
- Поиск пользователей (по нику) — базовый.
- Роутинг: переход на профиль из карточек треков/плейлистов/поиска.
- Заглушки/состояния: загрузка, пусто, ошибка.

### 6.1. Личный профиль (для уже вошедшего пользователя)
- Карточка профиля: аватар, никнейм, e-mail (если есть), дата регистрации.
- Редактирование профиля:
  - смена аватара (upload с предпросмотром, сжатие/обрезка на клиенте — позже);
  - изменение никнейма (валидация, уникальность — mock на MVP);
  - краткое био/описание;
  - сохранение в localStorage (mock) → позже API.
- Активность и статистика:
  - количество плейлистов, загруженных треков, избранного;
  - последние опубликованные треки (линк на «Опубликовано» из «Моя музыка»);
  - последние плейлисты.
- Быстрые действия:
  - перейти к «Моя музыка» (загрузки/опубликовано);
  - перейти к «Плейлисты»;
  - выход из профиля.
- Состояния и заглушки: загрузка, пусто, ошибка.
- Интеграция (после MVP):
  - GET /me — профиль;
  - PATCH /me — обновление профиля;
  - GET /me/stats — персональные метрики.

## 7. Навигация и UI
- Хедер: быстрые ссылки — Главная, Моя музыка, Плейлисты, Пользователи, Профиль.
- Единый PlayerBar (уже есть) — контроль воспроизведения.
- Унификация карточек и лэйаутов (grid/list) для разных блоков.

## 8. Бэклог (после MVP)
- Выбор плейлиста при добавлении трека (вместо дефолтного).
- Расширенная модалка информации о треке (битрейт, размер, жанры, комментарии).
- Реальные метрики «Популярного» (плейы/лайки/репосты), страницы чартов.
- Рекомендательная система (история прослушиваний, коллаборативная фильтрация).
- Комментарии к трекам и плейлистам.
- Социальные фичи: подписки, лента активности.
- Модерация загруженного контента.

## 9. Переход с заглушек на реальное API 
- Заменить все mock-источники данных на реальные эндпоинты.
- Настроить конфигурацию окружения (`.env`) с `VITE_API_BASE_URL` и ключевыми флагами.
- Описать и подключить HTTP-клиент (fetch/axios) с интерсепторами ошибок.
- Карта эндпоинтов (пример):
  - GET /banner — данные баннера главной.
  - GET /recommendations — рекомендации треков.
  - GET /tracks/popular — популярное сейчас.
  - GET /tracks/new — новые релизы (сортировка по дате).
  - GET /tracks/user-latest — музыка пользователей (карусель/грид).
  - POST /uploads — загрузка трека; GET /uploads — список моих загрузок; PATCH /uploads/:id — статус.
  - GET /users — список пользователей; GET /users/:id — профиль.
  - GET /me — личный профиль; PATCH /me — обновление полей профиля; POST /me/avatar — загрузка аватара; GET /me/stats — метрики.
  - POST /playlists/favorites (auto-create), POST /playlists/:id/tracks — добавление трека в плейлист.
  - GET /tracks/:id — детали трека (для ℹ модалки); POST /tracks/:id/play — учёт прослушивания.
  - Auth/identity — использовать существующие механики проекта.
– По завершении MVP пройтись по всем местам использования mock-данных и переписать на реальные запросы.
Отказ от API

---


# Чек-лист задач (кратко)

- [x] Главная: Баннер
- [x] Главная: Популярное сейчас (mock)
- [x] Главная: Новые релизы (из базы по дате)
- [x] Главная: Музыка пользователей — карусель/грид
- [x] Карточка: унификация внешнего вида (RecommendationCard)
 - [x] UI: Горизонтальная прокрутка секций с кнопками-стрелками (авто-hide)
- [ ] Карточка: ❤ в «Любимое» (создание плейлиста при отсутствии)
- [ ] Карточка: ➕ в плейлист (пока дефолтный)
- [ ] Карточка: ℹ️ модалка информации о треке
- [x] Моя музыка: список загруженных треков
- [x] Моя музыка: загрузка (drag&drop + file picker)
- [x] Моя музыка: статусы «обрабатывается/опубликован»
- [ ] Пользователи: список, профиль, поиск, подписки (mock)
- [ ] Источники данных: mock → API для «Новые релизы» и «Популярное»
- [ ] Интеграция реального API: заменить все заглушки, настроить ENV и HTTP-клиент
